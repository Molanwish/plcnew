# PLC 地址映射表

本文档基于 `weighing_system/src/communication/comm_manager.py` 文件整理，列出了软件与 PLC 交互所使用的地址。

## 数据寄存器 (HD - 32位)

| 功能/参数         | 地址 (列表对应斗1-6)                      | 类型 | 描述                             |
| :---------------- | :---------------------------------------- | :--- | :------------------------------- |
| **称重数据**      | 700, 702, 704, 706, 708, 710 (读取)        | HD   | 各斗实时重量                     |
| **粗加料速度**    | 300, 320, 340, 360, 380, 400             | HD   | 粗加料速度 (快加速度)(0-50)        |
| **精加料速度**    | 302, 322, 342, 362, 382, 402             | HD   | 精加料速度 (慢加速度)(0-50)        |
| **粗加提前量**    | 500, 504, 508, 512, 516, 520             | HD   | 粗加提前量 (g)                   |
| **精加提前量**    | 502, 506, 510, 514, 518, 522             | HD   | 精加提前量 (落差值)(g)           |
| **目标重量**      | 141, 142, 143, 144, 145, 146             | HD   | 各斗独立目标重量 (g)             |
| **点动时间**      | 70                                        | HD   | 点动时间 (ms)                    |
| **点动间隔时间**  | 72                                        | HD   | 点动间隔时间 (ms)                |
| **清料速度**      | 290                                       | HD   | 清料速度                         |
| **清料时间**      | 80                                        | HD   | 清料时间 (ms)                    |
| **统一目标重量**  | 4                                         | HD   | 统一目标重量 (g) (当统一模式开启) |

## 控制线圈 (M地址 - 开关量)

| 功能/命令   | 地址 (列表对应斗1-6)                | 类型 | 描述                 |
| :---------- | :---------------------------------- | :--- | :------------------- |
| **总启动**    | 300                                 | M    | 启动所有斗           |
| **总停止**    | 301                                 | M    | 停止所有斗           |
| **总清零**    | 6                                   | M    | 所有斗重量清零       |
| **总放料**    | 5                                   | M    | 所有斗执行放料动作     |
| **总清料**    | 7                                   | M    | 所有斗执行清料动作     |
| **斗启动**    | 110, 111, 112, 113, 114, 115      | M    | 单独启动某个斗       |
| **斗停止**    | 120, 121, 122, 123, 124, 125      | M    | 单独停止某个斗       |
| **斗清零**    | 181, 182, 183, 184, 185, 186      | M    | 单独清零某个斗重量   |
| **斗放料**    | 51, 52, 53, 54, 55, 56            | M    | 单独为某个斗执行放料 |
| **斗清料**    | 61, 62, 63, 64, 65, 66            | M    | 单独为某个斗执行清料 |
| **统一重量模式**| 0                                   | M    | 切换统一/独立重量模式 |

**注意:**
*   HD 类型通常表示 32 位数据，占用两个连续的 16 位 Modbus 寄存器。
*   M 类型表示线圈（开关量）。
*   `send_command` 函数对部分线圈执行后会自动复位，模拟点动；但启动/停止等状态可能由软件或 PLC 内部逻辑维持。 